
查看本機 docker 網路列表

  docker network ls

以下就來介紹三種使用 Docker 時，一定會遇到的基礎網路模式：

Bridge Network (橋接網絡)：
bridge 是在 Docker 裡預設的網路。在 bridge 網路模式中，每个 Container (容器)都分配一个獨立、不重複的 IP 地址，Container (容器)可以通过这个 IP 地址相互聯絡。容器可以通過一個主機的 NAT（網絡地址轉換）訪問外部網絡。

容器可以通過一個主機的 NAT（網絡地址轉換）訪問外部網絡

我在看上述這句話的時候覺得看了沒有很懂，所以了解了一下，再以自己的話加以解釋：

上面有說到每個 Container (容器)都會分配一个獨立、不重複的 IP 地址，而這些 IP 地址是私有的，只能在 Container (容器)內找到，無法跟 Container (容器)外部聯絡。所以當 Container (容器)需要與外部聯絡時， Docker 主機會成為 Docker Network(網路)的 NAT ，全名為 Network Address Translation（網路地址翻譯），也就是可以把 Docker 主機想像成翻譯機，將 Container (容器)內的請求，翻譯成外部可以聽得懂的語言，然後將外部回來的 response 再翻譯回給 Container (容器)。

Host Network（主機網路）：
當 Container (容器)使用 Host Network 模式時，代表它們與主機共享同樣的網絡接口和設定，也就是與主機具有相同且公開的 IP 地址。這意味著 Container (容器)可以像主機 (Host) 一樣直接使用主機上的網絡資源，所以並不需要使用 NAT 這個翻譯機來翻譯。

另外通常，在 Docker 中，容器的 port (端口)可以對應到主機的某個 port (端口)，以便從外部網絡可順利對應到 Container (容器)中的服務。但在主機網絡模式下，容器不需要 port (端口)對應。容器的網絡設定與主機上的網絡設定一樣，它們可以使用相同的 port (端口)。

None Network（無網路）：
在 None Network（無網路）模式下， Container (容器)不會連接到任何網絡，因為根本沒有網絡接口。
None Network（無網路）適用時機會是比較特殊的情況，例如：我希望 Container (容器)完全隔離並且沒有任何網絡訪問權限。



我的每一個 Container (容器)分別使用哪些網路
要想知道任一個 Container (容器)的詳細資訊，例如：使用哪個網路、環境變數有哪些等等時，可以使用

docker inspect <container_id_or_name>
  

docker logs hbbs

sudo docker image pull rustdesk/rustdesk-server
sudo docker run --name hbbs -v ./data:/root -td --net=host --restart unless-stopped rustdesk/rustdesk-server hbbs
sudo docker run --name hbbr -v ./data:/root -td --net=host --restart unless-stopped rustdesk/rustdesk-server hbbr


hbbs -p 33001 -r 0.0.0.0:33002
  hbbr -p 33002
  open port NAT 33000-33002





services:
  hbbs:
    container_name: hbbs
    image: rustdesk/rustdesk-server:latest
    command: hbbs -p 33001 -r 0.0.0.0:33002
    volumes:
      - ./data:/root
    network_mode: "host"

    depends_on:
      - hbbr
    restart: unless-stopped

  hbbr:
    container_name: hbbr -p 33002
    image: rustdesk/rustdesk-server:latest
    command: hbbr
    volumes:
      - ./data:/root
    network_mode: "host"
    restart: unless-stopped


  
  

